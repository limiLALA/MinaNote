## producer发送消息过程
消息的发送都是batch的，先写入发送buffer中，再异步发送。
消息的发送需要经过拦截器，序列化器，分区器
如果没有设置通过key的哈希获取具体partition的信息，那么就会使用轮询的方式获取将要写入的partition
发送消息时，需要寻找对应partition的leader在哪个broker上
这一步是从zookeeper中获取到的

## sarama异步同步
使用sarama框架对producer进行包装
底层其实是使用了golang中的channel对一次异步发送转化为同步发送。

## 如何算是发送成功
通过配置项的不同，可以有不同的做法
0，无需等待leader的ack就认为成功
1，broker会在leader写入返回后就ack
-1，broker会在leader同步完ISR之后返回ack

##
